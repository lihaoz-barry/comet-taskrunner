# ğŸš€ Comet Task Runner - é¡¹ç›®æ–‡æ¡£

**ç‰ˆæœ¬**: 0.1.0
**çŠ¶æ€**: åˆå§‹å‘å¸ƒ
**ä»“åº“**: https://github.com/lihaoz-barry/comet-taskrunner
**åˆ›å»ºæ—¥æœŸ**: 2025-11-22

---

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

Comet Task Runner æ˜¯ä¸€ä¸ªåŸºäº Python çš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œç”¨äº Comet æµè§ˆå™¨çš„ä»»åŠ¡ç®¡ç†å’Œæ‰§è¡Œã€‚æ”¯æŒ URL å¯¼èˆªå’Œ AI åŠ©æ‰‹äº¤äº’ä¸¤ç§ä»»åŠ¡ç±»å‹ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **URL ä»»åŠ¡è‡ªåŠ¨åŒ–**: è‡ªåŠ¨æ‰“å¼€å¹¶å¯¼èˆªåˆ°æŒ‡å®š URL
- âœ… **AI åŠ©æ‰‹é›†æˆ**: è‡ªåŠ¨åŒ– AI åŠ©æ‰‹äº¤äº’ï¼ˆå®éªŒæ€§åŠŸèƒ½ï¼‰
- âœ… **ç»„ä»¶åŒ–æ¶æ„**: åŸºäºæŠ½è±¡åŸºç±»çš„å¯æ‰©å±•ä»»åŠ¡ç³»ç»Ÿ
- âœ… **å®æ—¶ç›‘æ§**: è¿›ç¨‹ç›‘æ§å’ŒçŠ¶æ€è½®è¯¢
- âœ… **ç”¨æˆ·å‹å¥½ç•Œé¢**: Tkinter GUI ç•Œé¢
- âœ… **REST API**: Flask åç«¯æ”¯æŒç¼–ç¨‹å¼è°ƒç”¨

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ç³»ç»Ÿç»„ä»¶

```
Frontend (Tkinter GUI)
    â†“
Backend (Flask REST API)
    â†“
Task Manager (ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†)
    â†“
Task Components (å¯å¤ç”¨ä»»åŠ¡ç»„ä»¶)
    â”œâ”€â”€ URLTask (URL å¯¼èˆª)
    â””â”€â”€ AITask (AI åŠ©æ‰‹äº¤äº’)
```

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | ç”¨é€” |
|------|------|------|
| å‰ç«¯ | Tkinter | GUI ç•Œé¢ |
| åç«¯ | Flask | REST API æœåŠ¡å™¨ |
| è¿›ç¨‹ç®¡ç† | psutil | è¿›ç¨‹ç›‘æ§ |
| HTTP å®¢æˆ·ç«¯ | requests | API è°ƒç”¨ |
| æµè§ˆå™¨ | Comet Browser | ä»»åŠ¡æ‰§è¡Œç¯å¢ƒ |

### è®¾è®¡æ¨¡å¼

- **æ¨¡æ¿æ–¹æ³•æ¨¡å¼**: BaseTask å®šä¹‰ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸï¼Œå­ç±»å®ç°å…·ä½“é€»è¾‘
- **å·¥å‚æ¨¡å¼**: TaskManager åˆ›å»ºä¸åŒç±»å‹çš„ä»»åŠ¡
- **è§‚å¯Ÿè€…æ¨¡å¼**: Frontend è½®è¯¢ Backend è·å–ä»»åŠ¡çŠ¶æ€

---

## ğŸ”„ ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸ

### çŠ¶æ€è½¬æ¢

```
CREATED â†’ RUNNING â†’ DONE/FAILED
```

### å®Œæˆæ£€æµ‹æœºåˆ¶

#### URLTask
- æµè§ˆå™¨è¿›ç¨‹é€€å‡ºæ—¶è‡ªåŠ¨å®Œæˆ
- æ”¯æŒæ‰‹åŠ¨ callback æ ‡è®°å®Œæˆ

#### AITask (å®éªŒæ€§)
- æµè§ˆå™¨è¿›ç¨‹é€€å‡ºæ£€æµ‹
- AI æˆªå›¾åˆ†æ (è®¡åˆ’ä¸­)
- æ‰‹åŠ¨ callback

---

## ğŸ“Š é¡¹ç›®ç»“æ„

```
comet-taskrunner/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ frontend.py          # Tkinter GUI å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ backend.py           # Flask REST API æœåŠ¡å™¨
â”‚   â”œâ”€â”€ task_manager.py      # ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨
â”‚   â””â”€â”€ tasks/               # ä»»åŠ¡ç»„ä»¶åŒ…
â”‚       â”œâ”€â”€ __init__.py      # åŒ…åˆå§‹åŒ–
â”‚       â”œâ”€â”€ base_task.py     # æŠ½è±¡åŸºç±»
â”‚       â”œâ”€â”€ url_task.py      # URL å¯¼èˆªä»»åŠ¡
â”‚       â””â”€â”€ ai_task.py       # AI åŠ©æ‰‹ä»»åŠ¡
â”œâ”€â”€ docs/                    # è¯¦ç»†æ–‡æ¡£
â”‚   â”œâ”€â”€ æ¶æ„è¯´æ˜ï¼ˆä¸­æ–‡ï¼‰.md
â”‚   â”œâ”€â”€ task_lifecycle.md
â”‚   â”œâ”€â”€ implementation_plan.md
â”‚   â””â”€â”€ ç»„ä»¶åŒ–è®¾è®¡.md
â”œâ”€â”€ README.md                # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ LICENSE                  # MIT è®¸å¯è¯
â”œâ”€â”€ requirements.txt         # Python ä¾èµ–
â”œâ”€â”€ run_app.bat             # ä¸€é”®å¯åŠ¨è„šæœ¬
â””â”€â”€ urls.json               # URL æŒä¹…åŒ–å­˜å‚¨
```

---

## ğŸš€ è¿è¡Œæ–¹å¼

### ç¯å¢ƒè¦æ±‚

- Python 3.x
- Comet Browser
- Windows æ“ä½œç³»ç»Ÿ

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/lihaoz-barry/comet-taskrunner.git
cd comet-taskrunner

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. å¯åŠ¨åº”ç”¨
python run_app.bat
```

### API ç«¯ç‚¹

#### ä»»åŠ¡æ‰§è¡Œ
- `POST /execute/url` - æ‰§è¡Œ URL ä»»åŠ¡
- `POST /execute/ai` - æ‰§è¡Œ AI ä»»åŠ¡

#### ç›‘æ§ä¸ç®¡ç†
- `GET /status/<task_id>` - è·å–ä»»åŠ¡çŠ¶æ€
- `GET /jobs` - åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡
- `GET /health` - æœåŠ¡å™¨å¥åº·æ£€æŸ¥
- `POST /callback` - æ‰‹åŠ¨æ ‡è®°ä»»åŠ¡å®Œæˆ

---

## ğŸ¯ è®¾è®¡ç»†èŠ‚

### æ ¸å¿ƒè®¾è®¡åŸåˆ™

1. **å…³æ³¨ç‚¹åˆ†ç¦»**
   - Frontend è´Ÿè´£ UI äº¤äº’
   - Backend è´Ÿè´£ä»»åŠ¡æ‰§è¡Œ
   - TaskManager è´Ÿè´£ç”Ÿå‘½å‘¨æœŸç®¡ç†
   - Task ç»„ä»¶è´Ÿè´£å…·ä½“é€»è¾‘

2. **ä¾èµ–å€’ç½®**
   - Task ç»„ä»¶ç‹¬ç«‹äºæ¡†æ¶
   - å¯åœ¨ Flaskã€Djangoã€CLI ç­‰ä»»ä½•ç¯å¢ƒä¸­å¤ç”¨

3. **å•ä¸€èŒè´£**
   - æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½
   - TaskManager ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘

### è½®è¯¢æœºåˆ¶

Frontend æ¯ 1 ç§’è½®è¯¢ä¸€æ¬¡ Backendï¼š
- æ£€æŸ¥ä»»åŠ¡çŠ¶æ€
- æ›´æ–° UI æ˜¾ç¤º
- æ— éœ€ WebSocket å¤æ‚åº¦

Backend æ¯ 5 ç§’ç›‘æ§ä¸€æ¬¡ï¼š
- æ£€æŸ¥æ‰€æœ‰ RUNNING ä»»åŠ¡
- è°ƒç”¨ä»»åŠ¡çš„ `check_completion()` æ–¹æ³•
- è‡ªåŠ¨æ ‡è®°å·²å®Œæˆçš„ä»»åŠ¡

---

## ğŸ“ˆ å¼€å‘è·¯çº¿å›¾

### Phase 1: åŸºç¡€åŠŸèƒ½ âœ…
- [x] URL ä»»åŠ¡æ‰§è¡Œ
- [x] è¿›ç¨‹ç›‘æ§
- [x] GUI ç•Œé¢
- [x] REST API

### Phase 2: AI é›†æˆ ğŸš§
- [x] AI ä»»åŠ¡æ¡†æ¶
- [ ] é¼ æ ‡/é”®ç›˜è‡ªåŠ¨åŒ–
- [ ] æˆªå›¾æ•è·
- [ ] åæ ‡æ ¡å‡†å·¥å…·

### Phase 3: æ™ºèƒ½æ£€æµ‹ ğŸ“…
- [ ] OpenCV æ¨¡æ¿åŒ¹é…
- [ ] OCR æ–‡å­—è¯†åˆ«
- [ ] AI æ¨¡å‹é›†æˆ
- [ ] è‡ªé€‚åº”å®Œæˆæ£€æµ‹

### Phase 4: é«˜çº§åŠŸèƒ½ ğŸ“…
- [ ] ä»»åŠ¡è°ƒåº¦
- [ ] ä»»åŠ¡é˜Ÿåˆ—
- [ ] å†å²è®°å½•
- [ ] æ•°æ®åˆ†æ

---

## ğŸ”§ æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ

### æŒ‘æˆ˜ 1: ä»»åŠ¡å®Œæˆæ£€æµ‹
**é—®é¢˜**: å¦‚ä½•çŸ¥é“æµè§ˆå™¨ä»»åŠ¡ä½•æ—¶å®Œæˆï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
1. è¿›ç¨‹ç›‘æ§ - æ£€æµ‹æµè§ˆå™¨è¿›ç¨‹é€€å‡º
2. æ‰‹åŠ¨ callback - æµè§ˆå™¨è„šæœ¬è°ƒç”¨ API
3. AI æ£€æµ‹ - æˆªå›¾åˆ†æï¼ˆè®¡åˆ’ä¸­ï¼‰

### æŒ‘æˆ˜ 2: å‰åç«¯é€šä¿¡
**é—®é¢˜**: æœåŠ¡å™¨å¦‚ä½•é€šçŸ¥å®¢æˆ·ç«¯ä»»åŠ¡å®Œæˆï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨è½®è¯¢è€Œé WebSocket
- ç®€å•ä¸”å¯é 
- é€‚åˆä»»åŠ¡æ‰§è¡Œåœºæ™¯ï¼ˆéå®æ—¶èŠå¤©ï¼‰

### æŒ‘æˆ˜ 3: ç»„ä»¶å¤ç”¨æ€§
**é—®é¢˜**: å¦‚ä½•è®© Task ç»„ä»¶ç‹¬ç«‹äºæ¡†æ¶ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
- çº¯ Python æŠ½è±¡åŸºç±»
- æ—  Flask/Tkinter ä¾èµ–
- å¯åœ¨ä»»ä½•ç¯å¢ƒä¸­å¯¼å…¥ä½¿ç”¨

---

## ğŸ“ ä»£ç ç¤ºä¾‹

### åˆ›å»ºå¹¶æ‰§è¡Œ URL ä»»åŠ¡

```python
# ä½¿ç”¨ TaskManager
from task_manager import TaskManager

manager = TaskManager()
task = manager.create_url_task("https://www.google.com")
pid = task.execute(comet_path="path/to/comet.exe")
task.start(pid)

# æ£€æŸ¥çŠ¶æ€
while task.status == TaskStatus.RUNNING:
    if task.check_completion():
        task.complete()
        break
```

### API è°ƒç”¨ç¤ºä¾‹

```bash
# æ‰§è¡Œ URL ä»»åŠ¡
curl -X POST http://127.0.0.1:5000/execute/url \
  -H "Content-Type: application/json" \
  -d '{"url": "https://www.perplexity.ai"}'

# å“åº”
{
  "status": "started",
  "task_id": "abc-123",
  "process_id": 12345
}

# æŸ¥è¯¢çŠ¶æ€
curl http://127.0.0.1:5000/status/abc-123
```

---

## ğŸ› å·²çŸ¥é™åˆ¶

1. **ä»…æ”¯æŒ Windows**
   - Comet æµè§ˆå™¨è·¯å¾„æŸ¥è¯¢ä½¿ç”¨ Windows æ³¨å†Œè¡¨
   - å¯æ‰©å±•åˆ°å…¶ä»–å¹³å°

2. **AI ä»»åŠ¡ä¸ºå®éªŒæ€§åŠŸèƒ½**
   - é¼ æ ‡/é”®ç›˜è‡ªåŠ¨åŒ–ä¸º placeholder
   - éœ€è¦å®ç°åæ ‡æ ¡å‡†

3. **æ— æŒä¹…åŒ–å­˜å‚¨**
   - ä»»åŠ¡æ•°æ®ä»…å­˜åœ¨å†…å­˜ä¸­
   - é‡å¯åä¸¢å¤±å†å²è®°å½•

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

1. **ä»£ç é£æ ¼**
   - ä½¿ç”¨ Python type hints
   - æ·»åŠ è¯¦ç»†çš„ docstring
   - éµå¾ª PEP 8 è§„èŒƒ

2. **æäº¤ä¿¡æ¯**
   - ä½¿ç”¨ Conventional Commits æ ¼å¼
   - ä¾‹: `feat: add task scheduling`, `fix: resolve process leak`

3. **æ–‡æ¡£**
   - æ›´æ–°ç›¸å…³ markdown æ–‡æ¡£
   - æ·»åŠ ä»£ç æ³¨é‡Š

---

## ğŸ“ è”ç³»æ–¹å¼

- **GitHub**: https://github.com/lihaoz-barry/comet-taskrunner
- **Issues**: https://github.com/lihaoz-barry/comet-taskrunner/issues
- **ä½œè€…**: Barry

---

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š
- Flask - Web æ¡†æ¶
- Tkinter - GUI æ¡†æ¶
- psutil - è¿›ç¨‹ç®¡ç†
- Comet Browser - æ‰§è¡Œç¯å¢ƒ

---

**æœ€åæ›´æ–°**: 2025-11-22
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
